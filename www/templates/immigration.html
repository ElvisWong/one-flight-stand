<ion-view view-title="immigration" ng-init="init()">
  <ion-content>
    <ion-header-bar align-title="left" class="bar immigration-header-bar" ng-class="{'closePanel': openForm}">
      <div class="buttons">
        <button class="button" ng-click="goBack()">
          <i class="ion-ios-arrow-back"></i>
        </button>
      </div>
      <h1 class="title" ng-class="{'header-title': openForm}">Immigration</h1>
      <h3 class="description" ng-show="!openForm">Create your arrival card</h3>
      <div class="immigration-icon" ng-show="!openForm">
        <img src="../img/passport_copy.png">
      </div>
      <!-- <span class="header-title" ng-show="openForm">Immigration</span> -->
      <div class="create-btn" ng-click="setTrip()" ng-class="{'return': openForm}">
        <i class="ion-plus-round" ng-if="!openForm"></i>
        <i class="ion-arrow-return-left" ng-if="openForm"></i>
      </div>
    </ion-header-bar>
    <div class="immigration-record list" ng-show="!openForm">
      <a ng-show="trip_list_data.length > 0 && !isLoading" class="item item-avatar" href="#" ng-click="getTrip(data)" ng-repeat="data in trip_list_data">
        <img src="../img/flags/48/Japan.png">
        <h2>UID : {{data.uid}}</h2>
        <p>Create Time : {{data.create_time}}</p>
        <p>Japan Immigration - 10/9/2016</p>
      </a>
      <a ng-hide="trip_list_data.length > 0 || isLoading" class="item item-avatar" href="#">
        <img src="../img/icon.png">
        <h2>No Trip Record is available.</h2>
        <p>Press + to start your first Trip.</p>
      </a>
      <a ng-show="isLoading" class="item text-center">
        <h2><ion-spinner icon="bubbles"></ion-spinner></h2>
      </a>
<!--        
      <a class="item item-avatar" href="#" ng-click="getTrip()">
        <img src="../img/flags/48/Thailand.png">
        <h2>Cathay Pacific : UX 002</h2>
        <p>Thailand Immigration - 21/8/2016</p>
      </a>
      <a class="item item-avatar" href="#" ng-click="getTrip()">
        <img src="../img/flags/48/Poland.png">
        <h2>Cathay Pacific : UX 003</h2>
        <p>Poland Immigration - 03/2/2016</p>
      </a>
-->        
    </div>
    <div class="immigration" ng-show="openForm">
      <div class="list">
        <label class="item item-input item-floating-label">
          <span class="input-label">Full Name:</span>
          <input type="text" placeholder="{{data.user_info.name}}" ng-model="data.user_info.name">
        </label>
        <label class="item item-input item-floating-label">
          <span class="input-label">Nationality:</span>
          <input type="text" placeholder="{{data.user_info.nationality}}" ng-model="data.user_info.nationality">
        </label>
        <label class="item item-input item-floating-label">
          <span class="input-label">Date of Birth:</span>
          <input type="text" placeholder="{{data.user_info.date_of_birth}}" ng-model="data.user_info.date_of_birth">
        </label>
        <button class="button button-block button-outline button-dark" ng-class="{'disable': checkFinished()}" ng-click="submitForm()">Submit Immigration Paper</button>
      </div>
    </div>
  </ion-content>
</ion-view>

<script id="templates/modal.html" type="text/ng-template">
  <ion-modal-view class="qr-code-modal">
    <ion-header-bar class="bar bar-header bar-light">
      <h1 class="title">Immigration Record</h1>
      <button class="button button-clear button-primary" ng-click="modal.hide()"><i class="ion-close-round"></i></button>
    </ion-header-bar>
    <ion-content>
      <div class="qr-code">
        <qr text="qrcode_string" type-number="typeNumber" correction-level="correctionLevel" size="size" input-mode="inputMode" image="image"></qr>
      </div>
    </ion-content>
  </ion-modal-view>
</script>
